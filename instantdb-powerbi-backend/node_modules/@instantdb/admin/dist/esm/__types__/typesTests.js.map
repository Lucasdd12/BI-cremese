{"version":3,"file":"typesTests.js","sourceRoot":"","sources":["../../../src/__types__/typesTests.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Equal, Expect, IsAny, NotAny } from './typeUtils.ts';\nimport { i, init } from '../index.ts';\n\nconst schema = i.schema({\n  entities: {\n    tbl: i.entity({\n      d: i.date().indexed(),\n      dOptional: i.date().optional(),\n    }),\n  },\n});\n\nasync function _testUseDatesTest() {\n  const db = init({\n    schema,\n    appId: '123',\n    useDateObjects: true,\n  });\n\n  const data = await db.query({ tbl: {} });\n  const item = data?.tbl[0];\n  if (item) {\n    type t = typeof item.d;\n    type _cases = [Expect<NotAny<t>>, Expect<Equal<t, Date>>];\n\n    type tOpt = typeof item.dOptional;\n    type _cases_2 = [\n      Expect<NotAny<tOpt>>,\n      Expect<Equal<tOpt, Date | undefined>>,\n    ];\n  }\n}\n\nasync function _testUseDatesFalseTest() {\n  const db = init({\n    schema,\n    appId: '123',\n    useDateObjects: false,\n  });\n\n  const data = await db.query({ tbl: {} });\n  const item = data?.tbl[0];\n  if (item) {\n    type t = typeof item.d;\n    type _cases = [Expect<NotAny<t>>, Expect<Equal<t, string | number>>];\n\n    type tOpt = typeof item.dOptional;\n    type _cases_2 = [\n      Expect<NotAny<tOpt>>,\n      Expect<Equal<tOpt, string | number | undefined>>,\n    ];\n  }\n}\n\nasync function _testUseDatesUndefinedTest() {\n  const db = init({\n    schema,\n    appId: '123',\n  });\n\n  const data = await db.query({ tbl: {} });\n  const item = data?.tbl[0];\n  if (item) {\n    type t = typeof item.d;\n    type _cases = [Expect<NotAny<t>>, Expect<Equal<t, string | number>>];\n\n    type tOpt = typeof item.dOptional;\n    type _cases_2 = [\n      Expect<NotAny<tOpt>>,\n      Expect<Equal<tOpt, string | number | undefined>>,\n    ];\n  }\n}\n\nasync function _testDataNoSchema() {\n  const db = init({\n    appId: '123',\n  });\n\n  const data = await db.query({ tbl: {} });\n  const item = data?.tbl[0];\n  if (item) {\n    type t = typeof item.d;\n    type _cases = [Expect<IsAny<t>>, Expect<Equal<typeof item.id, string>>];\n  }\n}\n\nasync function _testSubscribe() {\n  // No useDateObjects\n  init({\n    appId: '123',\n    schema,\n  }).subscribeQuery({ tbl: {} }, (payload) => {\n    if (payload.type === 'ok') {\n      const item = payload.data.tbl[0];\n      if (item) {\n        type _cases = [\n          Expect<Equal<typeof item.id, string>>,\n          Expect<Equal<typeof item.d, string | number>>,\n          Expect<Equal<typeof item.dOptional, string | number | undefined>>,\n        ];\n      }\n    }\n  });\n\n  // UseDateObjects\n  init({\n    appId: '123',\n    schema,\n    useDateObjects: true,\n  }).subscribeQuery({ tbl: {} }, (payload) => {\n    if (payload.type === 'ok') {\n      const item = payload.data.tbl[0];\n      if (item) {\n        type _cases = [\n          Expect<Equal<typeof item.id, string>>,\n          Expect<Equal<typeof item.d, Date>>,\n          Expect<Equal<typeof item.dOptional, Date | undefined>>,\n        ];\n      }\n    }\n  });\n\n  // No schema\n  init({\n    appId: '123',\n  }).subscribeQuery({ tbl: {} }, (payload) => {\n    if (payload.type === 'ok') {\n      const item = payload.data.tbl[0];\n      if (item) {\n        type _cases = [\n          Expect<Equal<typeof item.id, string>>,\n          Expect<IsAny<typeof item.d>>,\n          Expect<IsAny<typeof item.dOptional>>,\n        ];\n      }\n    }\n  });\n}\n"]}